# lab1-shell 设计思路

### 1、shell指令实现

实现的shell指令包括**echo**、**ls**、**mkdir**、**pwd**和**cat**

**关于参数的处理**

考虑用一个参数信号数组，数组的每个元素标记指令是否指定该参数，通过if判断并作出对应的处理，例如：

```c
#define ARGV_CNT 1
#define ARGV_n 0

static char params[ARGV_CNT];

// ...
if (params[ARGV_n] == 1)
{
    // do something
}
// ...
```

**pwd**

指令模式：`pwd [options]`；

将当前工作目录全路径输出到标准输出。

实现思路：

在`main.c`中调用`getcwd()`函数得到当前全路径并输出到标准输出。

**echo**

指令格式：`echo [options] [string]`；

将string的内容输出到标准输出。

options

实现`-n`参数，取消输出最后的换行符。

实现思路：

在`main.c`中逐个解析`argv`直到遇到第一个非option项，将前面的option项设置到对应的params数组元素。随后逐个输出argv，空格隔开。若`params[ARGV_n]`被设置则不输出换行符。

**cat**

指令格式：`cat [options] [file]`；

将file的内容输出到标准输出。

1、cat filename，查看filename内容。

2、cat -n filename，查看文件的内容，并对所有输出行进行编号（包括空白行）。

3、cat -b filename ，用法和 -n 差不多，但是不对空白行编号。

4、cat -s filename，当遇到有连续两行或两行以上的空白行，就代换为一行的空白行。

5、cat -e filename，在输出内容的每一行后面加一个$符号（包括空白行）

实现思路：

打开指定file，并用read一次读取大量数据，随后逐个字符输出。

**ls**

指令格式：`ls [options] [directory]`；

列出指定目录下的文件信息，若未指定目录信息，则列出当前工作目录下的文件信息。

